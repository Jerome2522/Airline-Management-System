<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Airline Reservations</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9f9f9;
      padding: 40px;
    }
    h2 {
      text-align: center;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
    }
    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }
    th {
      background: #444;
      color: white;
    }
    .btn {
      padding: 6px 12px;
      color: white;
      background: #28a745;
      border: none;
      cursor: pointer;
      margin-right: 5px;
    }
    .btn-danger {
      background: #dc3545;
    }
    .btn:hover {
      opacity: 0.8;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.5);
      align-items: center;
      justify-content: center;
    }
  </style>
</head>
<body>

<h2>Airline Reservation System</h2>
<button class="btn" onclick="showAddModal()">+ Add Reservation</button>

<!-- Add Reservation Modal -->
<div id="addModal" class="modal">
  <div style="background:white; padding:24px; border-radius:8px; min-width:300px; max-width:90vw; margin:auto;">
    <h3>Add Reservation</h3>
    <form method="POST" action="/add">
      <input type="text" name="name" placeholder="Name" required style="width:100%; margin-bottom:8px;" />
      <input type="number" name="age" placeholder="Age" required style="width:100%; margin-bottom:8px;" />
      <input type="text" name="phone" placeholder="Phone" required style="width:100%; margin-bottom:8px;" />
      <input type="date" name="date" required style="width:100%; margin-bottom:8px;" />
      <div style="text-align:right;">
        <button type="button" class="btn btn-danger" onclick="hideAddModal()">Cancel</button>
        <button type="submit" class="btn">Save</button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Reservation Modal -->
<div id="editModal" class="modal">
  <div style="background:white; padding:24px; border-radius:8px; min-width:300px; max-width:90vw; margin:auto;">
    <h3>Edit Reservation</h3>
    <form method="POST" action="/edit">
      <input type="hidden" name="res_id" id="edit_res_id" />
      <input type="text" name="name" id="edit_name" placeholder="Name" required style="width:100%; margin-bottom:8px;" />
      <input type="number" name="age" id="edit_age" placeholder="Age" required style="width:100%; margin-bottom:8px;" />
      <input type="text" name="phone" id="edit_phone" placeholder="Phone" required style="width:100%; margin-bottom:8px;" />
      <input type="date" name="date" id="edit_date" required style="width:100%; margin-bottom:8px;" />
      <div style="text-align:right;">
        <button type="button" class="btn btn-danger" onclick="hideEditModal()">Cancel</button>
        <button type="submit" class="btn">Save</button>
      </div>
    </form>
  </div>
</div>

<table>
  <thead>
    <tr>
      <th>ID</th><th>Name</th><th>Age</th><th>Phone</th><th>Date</th><th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {% for row in reservations %}
    <tr>
      <td>{{ row[0] }}</td>
      <td>{{ row[1] }}</td>
      <td>{{ row[2] }}</td>
      <td>{{ row[3] }}</td>
      <td>{{ row[4] }}</td>
      <td>
        <button class="btn" onclick="showEditModal('{{ row[0] }}', '{{ row[1] }}', '{{ row[2] }}', '{{ row[3] }}', '{{ row[4] }}')">Edit</button>
        <a href="/delete/{{ row[0] }}" onclick="return confirm('Delete reservation for {{ row[1] }}?');">
          <button class="btn btn-danger">Delete</button>
        </a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<script>
function showAddModal() {
  document.getElementById('addModal').style.display = 'flex';
}
function hideAddModal() {
  document.getElementById('addModal').style.display = 'none';
}
function showEditModal(id, name, age, phone, date) {
  document.getElementById('edit_res_id').value = id;
  document.getElementById('edit_name').value = name;
  document.getElementById('edit_age').value = age;
  document.getElementById('edit_phone').value = phone;
  document.getElementById('edit_date').value = date;
  document.getElementById('editModal').style.display = 'flex';
}
function hideEditModal() {
  document.getElementById('editModal').style.display = 'none';
}
// Optional: Close modal when clicking outside the form
window.onclick = function(event) {
  var addModal = document.getElementById('addModal');
  var editModal = document.getElementById('editModal');
  if (event.target === addModal) {
    hideAddModal();
  }
  if (event.target === editModal) {
    hideEditModal();
  }
}
</script>

</body>
</html>
